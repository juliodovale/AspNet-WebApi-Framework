
IF (OBJECT_ID('GENERO') IS NULL )
	BEGIN
		CREATE TABLE GENERO(
			 ID        INT IDENTITY (1, 1),
			 DESCRICAO VARCHAR(12),
			 CONSTRAINT PK_GENERO PRIMARY KEY (ID)
		  );
	END
	INSERT INTO GENERO
	SELECT
		'MASCULINO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM GENERO WHERE DESCRICAO = 'MASCULINO')
	INSERT INTO GENERO
	SELECT
		'FEMININO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM GENERO WHERE DESCRICAO = 'FEMININO')
	

IF (OBJECT_ID('USUARIO') IS NULL)
    BEGIN
		CREATE TABLE USUARIO (
			ID         INT IDENTITY (1, 1),
			NOME       VARCHAR(120),
			EMAIL      VARCHAR(120),
			SENHA      VARCHAR(320),
			NASCIMENTO DATETIME,
			IDGENERO   INT,
			CONSTRAINT PK_USUARIO PRIMARY KEY (ID),
			CONSTRAINT FK_USUARIO_GENERO FOREIGN KEY(IDGENERO) REFERENCES GENERO(ID)
		)
	END

IF (OBJECT_ID('TIPO_EVENTO') IS NULL)
	BEGIN
		CREATE TABLE TIPO_EVENTO (
			 ID        INT IDENTITY (1, 1),
			 DESCRICAO VARCHAR (120),
			 CONSTRAINT PK_TIPO_EVENTO PRIMARY KEY (ID),
		  );
	END
	INSERT INTO TIPO_EVENTO
	SELECT
		'EXCLUSIVO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM TIPO_EVENTO WHERE DESCRICAO = 'EXCLUSIVO')
	INSERT INTO TIPO_EVENTO
	SELECT
		'COMPARTILHADO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM TIPO_EVENTO WHERE DESCRICAO = 'COMPARTILHADO')
	
	
IF (OBJECT_ID('STATUS_EVENTO') IS NULL)
	BEGIN
		CREATE TABLE STATUS_EVENTO (
			 ID        INT IDENTITY (1, 1),
			 DESCRICAO VARCHAR (120),
			 CONSTRAINT PK_STATUS_EVENTO PRIMARY KEY (ID),
		  );
	END
	INSERT INTO STATUS_EVENTO
	SELECT
		'ATIVO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM STATUS_EVENTO WHERE DESCRICAO = 'ATIVO')
	INSERT INTO STATUS_EVENTO
	SELECT
		'CANCELADO'
	WHERE NOT EXISTS (SELECT TOP 1 * FROM STATUS_EVENTO WHERE DESCRICAO = 'CANCELADO')
	
IF (OBJECT_ID('EVENTO') IS NULL)
	BEGIN
		CREATE TABLE EVENTO (
		 ID            INT IDENTITY (1, 1),
		 NOME          VARCHAR(120),
		 DESCRICAO     VARCHAR(120),
		 DATA          DATETIME,
		 LOCAL         VARCHAR (120),
		 IDSTATUS      INT,
		 IDTIPO        INT,
		 CONSTRAINT PK_EVENTO PRIMARY KEY (ID),
		 CONSTRAINT FK_EVENTO_TIPO FOREIGN KEY(IDTIPO) REFERENCES TIPO_EVENTO(ID),
		 CONSTRAINT FK_EVENTO_STATUS FOREIGN KEY(IDSTATUS) REFERENCES STATUS_EVENTO(ID)
	  );
	END

IF (OBJECT_ID('PARTICIPANTES') IS NULL)
	BEGIN
		CREATE TABLE dbo.participantes_evento (
		 IDEVENTO  INT,
		 IDUSUARIO INT,
		 CONSTRAINT FK_IDEVENTO_EVENTO FOREIGN KEY(IDEVENTO) REFERENCES EVENTO(ID),
		 CONSTRAINT FK_IDUSUARIO_USUARIO FOREIGN KEY(IDUSUARIO) REFERENCES USUARIO(ID)
	  ); 
	END
